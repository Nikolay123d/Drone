<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prodej Dron≈Ø</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #fff;
    }
    .banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: #e60000;
      color: white;
      text-align: center;
      padding: 10px 0;
      font-size: 20px;
      font-weight: bold;
      z-index: 9999;
    }
    .banner button {
      background: #fff;
      color: #e60000;
      border: none;
      padding: 10px 15px;
      margin-left: 20px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
    }
    .images {
      margin-top: 60px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    .images img {
      width: 100%;
      max-width: 100%;
      display: block;
      margin: 20px auto;
      border-radius: 12px;
    }
    .description {
      text-align: center;
      font-size: 18px;
      margin: -10px 20px 30px;
      color: #ccc;
    }
    /* –ü–µ—Ä–≤–æ–µ –æ–∫–Ω–æ ‚Äî —Ñ–æ—Ä–º–∞ */
    .popup {
      display: none;
      position: fixed;
      top: 15%;
      left: 50%;
      transform: translate(-50%, -15%);
      width: 90%;
      max-width: 450px;
      background-color: #222;
      padding: 20px 25px 30px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
      z-index: 10000;
      max-height: 80vh;
      overflow-y: auto;
    }
    .popup h2 {
      margin-top: 0;
      color: #fff;
      text-align: center;
    }
    .close {
      position: absolute;
      top: 12px;
      right: 20px;
      color: #fff;
      font-size: 28px;
      cursor: pointer;
      font-weight: bold;
      user-select: none;
    }
    form input,
    form select,
    form textarea {
      width: 100%;
      margin-bottom: 15px;
      padding: 10px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      box-sizing: border-box;
    }
    form textarea {
      resize: vertical;
      min-height: 80px;
    }
    form button {
      background: #00cc00;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 18px;
      cursor: pointer;
      border-radius: 10px;
      width: 100%;
      margin-top: 5px;
    }
    #account-info {
      font-size: 16px;
      color: #fff;
      background: #333;
      padding: 15px;
      border-radius: 10px;
      display: none;
      margin-bottom: 15px;
    }
    #timer {
      margin-top: 10px;
      font-size: 16px;
      text-align: center;
      color: #ffcc00;
    }
    #confirm-payment-label {
      font-weight: bold;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
      user-select: none;
    }
    #confirm-payment {
      width: 22px;
      height: 22px;
      cursor: pointer;
      accent-color: #00cc00;
      /* –¢–æ–ª—Å—Ç–∞—è –≥–∞–ª–æ—á–∫–∞ */
      border-radius: 5px;
      border: 2px solid #00cc00;
    }
    /* –í—Ç–æ—Ä–æ–µ –æ–∫–Ω–æ ‚Äî –±–æ–Ω—É—Å—ã */
    .popup-bonus {
      display: none;
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translate(-50%, -10%);
      width: 90%;
      max-width: 480px;
      background-color: #222;
      padding: 25px 30px 30px;
      border-radius: 15px;
      box-shadow: 0 0 30px #ffcc00;
      z-index: 11000;
      max-height: 85vh;
      overflow-y: auto;
      color: #fff;
      text-align: center;
    }
    .popup-bonus h2 {
      margin-top: 0;
      font-size: 28px;
      color: #ffcc00;
      font-weight: 900;
      margin-bottom: 20px;
      text-shadow: 1px 1px 4px #000;
    }
    .popup-bonus .bonus-item {
      background: #333;
      border-radius: 12px;
      margin-bottom: 15px;
      padding: 12px;
      cursor: pointer;
      display: flex;
      gap: 15px;
      align-items: center;
      transition: background 0.3s ease;
      user-select: none;
    }
    .popup-bonus .bonus-item:hover,
    .popup-bonus .bonus-item.selected {
      background: #ffcc00;
      color: #111;
      font-weight: bold;
      box-shadow: 0 0 10px #ffcc00;
    }
    .popup-bonus img {
      width: 80px;
      height: auto;
      border-radius: 10px;
      flex-shrink: 0;
    }
    .popup-bonus .bonus-desc {
      flex-grow: 1;
      text-align: left;
      font-size: 16px;
      font-weight: 600;
    }
    .popup-bonus .bonus-price {
      font-size: 18px;
      font-weight: 900;
      flex-shrink: 0;
      min-width: 50px;
      text-align: right;
    }
    .popup-bonus button.continue-btn {
      margin-top: 25px;
      background: #ffcc00;
      color: #111;
      font-weight: 900;
      font-size: 20px;
      border: none;
      padding: 12px 0;
      width: 100%;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 0 15px #ffcc00;
      transition: background 0.3s ease;
    }
    .popup-bonus button.continue-btn:hover {
      background: #e6b800;
    }
  </style>
</head>
<body>
  <div class="banner">
    Uspƒõj koupit za 899 Kƒç
    <button onclick="showPopupForm()">Odeslat objedn√°vku</button>
  </div>

  <div class="images">
    <img src="https://i.ibb.co/zHZy0g5M/images-3.jpg" alt="Dron 1" />
    <div class="description">‚úÖ Kompaktn√≠ dron s HD kamerou a skl√°dac√≠m designem</div>
    <img src="https://i.ibb.co/B2b8YsRr/images-4.jpg" alt="Dron 2" />
    <div class="description">üì∑ Ostr√Ω obraz i p≈ôi letu d√≠ky stabilizaci</div>
    <img src="https://i.ibb.co/gMCpwwxT/3-14.jpg" alt="Dron 3" />
    <div class="description">üöÄ Rychl√Ω vzlet, ovl√°d√°n√≠ jedn√≠m tlaƒç√≠tkem</div>
    <img src="https://i.ibb.co/rWvv543/E88-Pro-professional-Drone-with-camera-RC-Drone-4-K-Professinal-HD-Camera-Foldable-Dron-Helicopter-W.webp" alt="Dron 4" />
    <div class="description">üéÆ Snadn√© ovl√°d√°n√≠ p≈ôes mobil nebo ovladaƒç</div>
    <img src="https://i.ibb.co/4RCNfC6L/4444502663-kvadrokopter-s-hd.webp" alt="Dron 5" />
    <div class="description">üîã V√Ωdr≈æ a≈æ 20 minut letu s n√°hradn√≠ bateri√≠</div>
  </div>

  <!-- –ü–µ—Ä–≤–æ–µ –æ–∫–Ω–æ ‚Äî —Ñ–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
  <div class="popup" id="popupForm">
    <span class="close" onclick="closePopup('popupForm')">&times;</span>
    <h2>Objedn√°vkov√Ω formul√°≈ô</h2>
    <form id="orderForm" action="https://getform.io/f/bgdlekoa" method="POST" enctype="multipart/form-data">
      <input type="text" name="name" placeholder="Va≈°e jm√©no" required />
      <input type="tel" name="phone" placeholder="Telefon" required />
      <input type="email" name="email" placeholder="Email" required />
      <select id="location" name="location" onchange="toggleAccountInfo()">
        <option value="praha" selected>Jsem z Prahy</option>
        <option value="nepraha">Nejsem z Prahy</option>
      </select>

      <div id="account-info">
        <p>
          Celkov√° cena: <strong><span id="totalPrice">899</span> Kƒç</strong><br />
          Z toho p≈ôedem na √∫ƒçet: <strong>250 Kƒç</strong> (ƒåSOB 354037257/0300)<br />
          Zbytek (<strong><span id="restPrice">649</span> Kƒç</strong>) p≈ôi p≈ôevzet√≠ v Z√°silkovnƒõ.
        </p>
        <label id="confirm-payment-label">
          <input type="checkbox" id="confirm-payment" name="payment_confirmed" value="yes" required />
          Potvrzuji platbu 250 Kƒç na √∫ƒçet
        </label>
      </div>

      <label for="payment-screenshot" style="font-weight: bold; margin-bottom: 6px; display: block;">
        P≈ôilo≈æit screenshot platby (voliteln√©):
      </label>
      <input type="file" id="payment-screenshot" name="payment_screenshot" accept="image/*" />

      <textarea name="comment" placeholder="Pozn√°mka nebo v√Ωdejn√≠ m√≠sto"></textarea>

      <button type="submit">Odeslat objedn√°vku</button>
      <div id="timer"></div>
    </form>
  </div>

  <!-- –í—Ç–æ—Ä–æ–µ –æ–∫–Ω–æ ‚Äî –≤—ã–±–æ—Ä –±–æ–Ω—É—Å–∞ -->
  <div class="popup-bonus" id="popupBonus">
    <span class="close" onclick="closePopup('popupBonus')">&times;</span>
    <h2>Gratulujeme! Jste 50. z√°kazn√≠k!</h2>
    <p style="font-size:18px; font-weight:bold; margin-bottom: 15px; color:#fff;">
      Likvidace zbo≈æ√≠ ‚Äì Vyberte si d√°rek k objedn√°vce:
    </p>

    <div class="bonus-item" data-bonus="chess" data-price="99" onclick="selectBonus(this)">
      <img src="https://i.ibb.co/5xgJZ8xd/IMG-2ef862afc33e2c3f5eaaa94a5a52f82f-V.jpg" alt="≈†achov√° deska" />
      <div class="bonus-desc">≈†achov√° deska ‚Äì pouze za 99 Kƒç (p≈ô√≠platek k objedn√°vce)</div>
      <div class="bonus-price">+99 Kƒç</div>
    </div>

    <div class="bonus-item" data-bonus="headphones" data-price="0" onclick="selectBonus(this)">
      <img src="https://i.ibb.co/xKxdGMW4/289748005.webp" alt="Sluch√°tka" />
      <div class="bonus-desc">Bezplatn√° sluch√°tka R47 (d√°rek zdarma)</div>
      <div class="bonus-price">ZDARMA</div>
    </div>

    <button class="continue-btn" onclick="applyBonus()">Pokraƒçovat v objedn√°vce</button>
    <div id="bonus-timer" style="color:#ffcc00; font-weight:bold; margin-top: 15px;"></div>
  </div>

  <script>
    // –û—Ç–∫—Ä—ã—Ç—å –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ
    function showPopupForm() {
      document.getElementById("popupForm").style.display = "block";
      startCountdown();
      toggleAccountInfo();
    }

    // –ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ
    function closePopup(id) {
      document.getElementById(id).style.display = "none";
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –±–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—á–µ—Ç–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞
    function toggleAccountInfo() {
      const location = document.getElementById("location").value;
      const accInfo = document.getElementById("account-info");
      if (location === "nepraha") {
        accInfo.style.display = "block";
      } else {
        accInfo.style.display = "none";
      }
    }

    // –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ (24 —á–∞—Å–∞)
    function startCountdown() {
      const timerDisplay = document.getElementById("timer");
      const now = Date.now();
      const storedDeadline = localStorage.getItem("deadline");
      let deadline = storedDeadline ? parseInt(storedDeadline) : now + 24 * 60 * 60 * 1000;
      localStorage.setItem("deadline", deadline);

      function updateTimer() {
        const remaining = deadline - Date.now();
        if (remaining <= 0) {
          timerDisplay.innerText = "‚è∞ ƒåas vypr≈°el!";
          return;
        }
        const hours = Math.floor(remaining / (1000 * 60 * 60));
        const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((remaining % (1000 * 60)) / 1000);
        timerDisplay.innerText = `‚è≥ Zb√Ωv√° ƒças: ${hours}h ${minutes}m ${seconds}s`;
        setTimeout(updateTimer, 1000);
      }
      updateTimer();
    }

    // –í—Ç–æ—Ä–æ–µ –æ–∫–Ω–æ —Å –±–æ–Ω—É—Å–∞–º–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã
    function showBonusPopup() {
      document.getElementById("popupBonus").style.display = "block";
      startBonusTimer();
    }

    // –í—ã–±—Ä–∞–Ω–Ω—ã–π –±–æ–Ω—É—Å –∏ —Ü–µ–Ω–∞
    let selectedBonus = null;
    let selectedBonusPrice = 0;

    // –í—ã–±–æ—Ä –±–æ–Ω—É—Å–∞ ‚Äî –ø–æ–¥—Å–≤–µ—Ç–∫–∞, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω—ã
    function selectBonus(element) {
      // –°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö
      document.querySelectorAll(".bonus-item").forEach((el) => el.classList.remove("selected"));
      element.classList.add("selected");
      selectedBonus = element.dataset.bonus;
      selectedBonusPrice = parseInt(element.dataset.price);
    }

    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –±–æ–Ω—É—Å, –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ø–µ—Ä–≤–æ–º –æ–∫–Ω–µ –∏ –∑–∞–∫—Ä—ã—Ç—å –±–æ–Ω—É—Å–Ω–æ–µ –æ–∫–Ω–æ
    function applyBonus() {
      if (!selectedBonus) {
        alert("Pros√≠m, vyberte si bonus.");
        return;
      }
      // –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É –Ω–∞ —Å–∞–π—Ç–µ –∏ –≤ —Ñ–æ—Ä–º–µ
      updatePrices(selectedBonusPrice);
      closePopup("popupBonus");
    }

    // –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –≤ —Ñ–æ—Ä–º–µ
    function updatePrices(bonusPrice) {
      const basePrice = 899;
      const prepayment = 250;
      const totalPriceElem = document.getElementById("totalPrice");
      const restPriceElem = document.getElementById("restPrice");
      const accountInfo = document.getElementById("account-info");

      let newTotal = basePrice + bonusPrice;
      totalPriceElem.innerText = newTotal;

      // –û—Å—Ç–∞—Ç–æ–∫ = –æ–±—â–∞—è —Å—É–º–º–∞ - –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞
      restPriceElem.innerText = newTotal - prepayment;

      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Å—á–µ—Ç–∞, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –Ω–µ –ø—Ä–∞–∂—Å–∫–∏–π –≥–æ—Ä–æ–¥ (–∫–∞–∫ —É —Ç–µ–±—è)
      toggleAccountInfo();

      // –ó–∞–ø–æ–º–Ω–∏–º –±–æ–Ω—É—Å –≤ —Å–∫—Ä—ã—Ç–æ–º input –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–º–µ—Å—Ç–µ —Å —Ñ–æ—Ä–º–æ–π
      let bonusInput = document.getElementById("bonusInput");
      if (!bonusInput) {
        bonusInput = document.createElement("input");
        bonusInput.type = "hidden";
        bonusInput.name = "bonus";
        bonusInput.id = "bonusInput";
        document.getElementById("orderForm").appendChild(bonusInput);
      }
      bonusInput.value = selectedBonus;

      // –û–±–Ω–æ–≤–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ–Ω—É—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è (–¥–ª—è —Ç–µ–±—è –≤ –ø–æ—á—Ç–µ)
      let bonusDescInput = document.getElementById("bonusDescInput");
      if (!bonusDescInput) {
        bonusDescInput = document.createElement("input");
        bonusDescInput.type = "hidden";
        bonusDescInput.name = "bonus_description";
        bonusDescInput.id = "bonusDescInput";
        document.getElementById("orderForm").appendChild(bonusDescInput);
      }
      const desc = selectedBonus === "chess" ? "≈†achov√° deska (+99 Kƒç)" : "Sluch√°tka R47 (zdarma)";
      bonusDescInput.value = desc;
    }

    // –¢–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ –¥–ª—è –±–æ–Ω—É—Å–∞ (–ø—Ä–∏–º–µ—Ä 3 —á–∞—Å–∞)
    function startBonusTimer() {
      const bonusTimer = document.getElementById("bonus-timer");
      const now = Date.now();
      const storedBonusDeadline = localStorage.getItem("bonusDeadline");
      let bonusDeadline = storedBonusDeadline ? parseInt(storedBonusDeadline) : now + 3 * 60 * 60 * 1000;
      localStorage.setItem("bonusDeadline", bonusDeadline);

      function updateBonusTimer() {
        const remaining = bonusDeadline - Date.now();
        if (remaining <= 0) {
          bonusTimer.innerText = "‚è∞ Akce na bonus skonƒçila!";
          return;
        }
        const hours = Math.floor(remaining / (1000 * 60 * 60));
        const minutes = Math.floor((remaining % (1000 * 60 * 60))
                                   const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((remaining % (1000 * 60)) / 1000);
        bonusTimer.innerText = `‚è≥ Akce konƒç√≠ za: ${hours}h ${minutes}m ${seconds}s`;
        setTimeout(updateBonusTimer, 1000);
      }
      updateBonusTimer();
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ —Å –∑–≤—É–∫–æ–º
    setTimeout(() => {
      showPopupForm();
      playSound('https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg');
    }, 5000);

    // –í—Ç–æ—Ä–æ–µ –æ–∫–Ω–æ —Å –±–æ–Ω—É—Å–æ–º —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ —Å –¥—Ä—É–≥–∏–º –∑–≤—É–∫–æ–º (–µ—Å–ª–∏ –ø–µ—Ä–≤–æ–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ)
    setTimeout(() => {
      if (document.getElementById("popupForm").style.display === "block") {
        showBonusPopup();
        playSound('https://actions.google.com/sounds/v1/cartoon/woodpecker_peck.ogg');
      }
    }, 10000);

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è –∑–≤—É–∫–∞ (3 —Å–µ–∫—É–Ω–¥—ã)
    function playSound(url) {
      const audio = new Audio(url);
      audio.volume = 0.5;
      audio.play();
      setTimeout(() => {
        audio.pause();
        audio.currentTime = 0;
      }, 3000);
    }
  </script>
</body>
</html>
