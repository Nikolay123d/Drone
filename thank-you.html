<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prodej DronÅ¯</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background-color: #111; color: #fff; }
    .banner {
      position: fixed; top: 0; left: 0; width: 100%; background: #e60000; color: white;
      text-align: center; padding: 10px 0; font-size: 20px; font-weight: bold; z-index: 9999;
    }
    .banner button {
      background: #fff; color: #e60000; border: none; padding: 10px 15px; margin-left: 20px;
      font-size: 16px; cursor: pointer; border-radius: 8px;
    }
    .images { margin-top: 60px; }
    .images img {
      width: 100%; max-width: 100%; display: block; margin: 20px auto; border-radius: 12px;
    }
    .description {
      text-align: center; font-size: 18px; margin: -10px 20px 30px; color: #ccc;
    }
    .popup, .bonus-popup, .delivery-popup, .messenger-popup {
      display: none; position: fixed; top: 10%; left: 50%; transform: translate(-50%, -10%);
      width: 90%; max-width: 400px; background-color: #222; padding: 20px; border-radius: 15px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); z-index: 10000; max-height: 90vh; overflow-y: auto;
    }
    .popup h2, .bonus-popup h2, .delivery-popup h2, .messenger-popup h2 {
      margin-top: 0; color: #fff;
    }
    .close {
      position: absolute; top: 10px; right: 20px; color: #fff; font-size: 24px; cursor: pointer;
    }
    form input, form select, form textarea {
      width: 100%; margin-bottom: 15px; padding: 10px; border: none;
      border-radius: 8px; font-size: 16px;
      background: #333; color: #fff;
    }
    form textarea { resize: vertical; min-height: 80px; }
    form button {
      background: #00cc00; color: white; border: none; padding: 12px 20px;
      font-size: 18px; cursor: pointer; border-radius: 10px; width: 100%;
    }
    #account-info {
      font-size: 15px; color: #fff; background: #333; padding: 15px;
      border-radius: 10px; display: none;
    }
    #account-info small {
      color: #bbb; display: block; margin-top: 10px; font-size: 13px;
    }
    #timer { margin-top: 10px; font-size: 16px; text-align: center; color: #ffcc00; }
    .bonus-options img {
      width: 40%; border-radius: 12px; margin-bottom: 10px; cursor: pointer;
    }
    .messenger-popup a {
      display: block; padding: 10px; background: #333; color: #00ccff;
      text-align: center; margin: 10px 0; border-radius: 8px; text-decoration: none;
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    label.checkbox-label {
      display: flex;
      align-items: center;
      color: #fff;
      margin-top: 15px;
      font-size: 16px;
      cursor: pointer;
    }
    label.checkbox-label input[type="checkbox"] {
      margin-right: 10px;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div class="banner">
  UspÄ›j koupit za 899 KÄ
  <button onclick="showPopup()">Odeslat objednÃ¡vku</button>
  <button onclick="triggerBonusManually()">ğŸ ZÃ­skat bonus</button>
  <button onclick="resetBonusAndTimer()" style="background:#555;color:#fff; margin-left:10px;">Reset</button>
</div>
<div class="images">
  <img src="https://i.ibb.co/zHZy0g5M/images-3.jpg" />
  <div class="description">âœ… KompaktnÃ­ dron s HD kamerou a sklÃ¡dacÃ­m designem</div>
  <img src="https://i.ibb.co/B2b8YsRr/images-4.jpg" />
  <div class="description">ğŸ“· OstrÃ½ obraz i pÅ™i letu dÃ­ky stabilizaci</div>
  <img src="https://i.ibb.co/gMCpwwxT/3-14.jpg" />
  <div class="description">ğŸš€ RychlÃ½ vzlet, ovlÃ¡dÃ¡nÃ­ jednÃ­m tlaÄÃ­tkem</div>
  <img src="https://i.ibb.co/rWvv543/E88-Pro-professional-Drone-with-camera-RC-Drone-4-K-Professinal-HD-Camera-Foldable-Dron-Helicopter-W.webp" />
  <div class="description">ğŸ® SnadnÃ© ovlÃ¡dÃ¡nÃ­ pÅ™es mobil nebo ovladaÄ</div>
  <img src="https://i.ibb.co/4RCNfC6L/4444502663-kvadrokopter-s-hd.webp" />
  <div class="description">ğŸ”‹ VÃ½drÅ¾ aÅ¾ 20 minut letu s nÃ¡hradnÃ­ bateriÃ­</div>
</div>

<!-- ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ·Ğ°ĞºĞ°Ğ·Ğ° -->
<div class="popup">
  <span class="close" onclick="this.parentElement.style.display='none'">Ã—</span>
  <h2>ObjednÃ¡vkovÃ½ formulÃ¡Å™</h2>
  <form action="https://getform.io/f/aoloxzrb" method="POST" enctype="multipart/form-data" id="order-form">
    <input type="text" name="name" placeholder="VaÅ¡e jmÃ©no" required />
    <input type="tel" name="phone" placeholder="Telefon" required />
    <input type="email" name="email" placeholder="Email" required />
    <input type="hidden" name="bonus_choice" id="bonus_choice" />
    <div id="account-info">
      <p>
        CelkovÃ¡ cena: <strong id="price">999 KÄ</strong><br />
        Z toho <strong>250 KÄ</strong> pÅ™edem na ÃºÄet:<br />
        <strong>ÄŒSOB 354037257/0300</strong><br />
        ğŸ“ PÅ™iloÅ¾te screenshot potvrzenÃ­:
        <input type="file" name="payment_proof" accept="image/*" />
        <small>
          ğŸ’¡ Platbu vybÃ­rÃ¡me pouze po potvrzenÃ­ odeslÃ¡nÃ­. SlouÅ¾Ã­ jako zÃ¡ruka, Å¾e objednÃ¡vka
          byla skuteÄnÄ› vytvoÅ™ena. Po pÅ™ijetÃ­ platby VÃ¡s ihned kontaktujeme ğŸ“¦
        </small>
      </p>
    </div>
    <textarea name="comment" placeholder="PoznÃ¡mka nebo vÃ½dejnÃ­ mÃ­sto"></textarea>

    <label for="city">MÄ›sto (napiÅ¡te prosÃ­m):</label>
    <input type="text" name="city" id="city" placeholder="NapiÅ¡te mÄ›sto" value="Praha" required />

    <button type="submit">Odeslat objednÃ¡vku</button>
    <button type="button" onclick="showMessengerPopup()">ğŸ“¨ Spojit se s nÃ¡mi</button>
    <div id="timer"></div>
  </form>
</div>

<!-- ĞĞºĞ½Ğ¾ Ñ Ğ±Ğ¾Ğ½ÑƒÑĞ°Ğ¼Ğ¸ -->
<div class="bonus-popup">
  <span class="close" onclick="closeBonusPopup()">Ã—</span>
  <h2 style="color: #ff4444">ğŸ L I K V I D A C E - Bonus k objednÃ¡vce!</h2>
  <p><strong>Vyberte pouze jeden bonus a potvrÄte zaÅ¡krtnutÃ­m:</strong></p>
  <div class="bonus-options">
    <label>
      <input type="radio" name="bonus" value="sachy" onchange="setBonus('sachy')" />
      ğŸ§© Å achovÃ¡ deska za 99 KÄ
    </label>
    <br />
    <img
      src="https://i.ibb.co/5xgJZ8xd/IMG-2ef862afc33e2c3f5eaaa94a5a52f82f-V.jpg"
      onclick="window.open(this.src)"
      style="cursor:pointer"
    />
    <label>
      <input type="radio" name="bonus" value="sluchatka" onchange="setBonus('sluchatka')" />
      ğŸ§ SluchÃ¡tka P47 ZDARMA
    </label>
    <br />
    <img
      src="https://i.ibb.co/xKxdGMW4/289748005.webp"
      onclick="window.open(this.src)"
      style="cursor:pointer"
    />
    <button id="bonus-confirm-btn" onclick="closeBonusPopup()" disabled>âœ… PokraÄovat k objednÃ¡vce</button>
  </div>
</div>

<!-- ĞĞºĞ½Ğ¾ Ñ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ¼ Ğ¿Ñ€Ğ¾ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºÑƒ Ğ¿Ğ¾ ĞŸÑ€Ğ°Ğ³Ğµ -->
<div class="delivery-popup">
  <span class="close" onclick="this.parentElement.style.display='none'">Ã—</span>
  <h2>ğŸšš Jste z Prahy?</h2>
  <p>
    Pokud ano, nabÃ­zÃ­me <strong>bezplatnou moÅ¾nost kurÃ½rnÃ­ dopravy po Praze</strong>.
    ZaÅ¡krtnÄ›te prosÃ­m nÃ­Å¾e a pokraÄujte v objednÃ¡vce.
  </p>
  <label class="checkbox-label">
    <input type="checkbox" id="free-delivery-checkbox" name="free_delivery" form="order-form" />
    âœ… Chci bezplatnou dopravu po Praze
  </label>
  <button onclick="closeDeliveryPopup()">PokraÄovat k objednÃ¡vce</button>
</div>

<!-- ĞœĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€Ñ‹ -->
<div class="messenger-popup" id="messengerPopup">
  <span class="close" onclick="this.parentElement.style.display = 'none'">Ã—</span>
  <h2>ğŸ’¬ Vyberte messenger pro spojenÃ­</h2>
  <a href="viber://add?number=380968700835">ğŸ“² Viber</a>
  <a href="https://wa.me/qr/G55T2UCT5BCPD1">ğŸ’¬ WhatsApp</a>
  <a href="https://t.me/darausoan">ğŸ“© Telegram</a>
</div>

<script defer data-domain="surl.li/ertngt" src="https://plausible.io/js/script.js"></script>

<script>
  let firstPopupShown = false;
  let bonusPopupTimer = null;
  let deliveryPopupTimer = null;

  // Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ/Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ "ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ" Ğ² Ğ±Ğ¾Ğ½ÑƒÑĞ°Ñ…
  function updateBonusConfirmButton() {
    const btn = document.getElementById("bonus-confirm-btn");
    const selectedBonus = document.querySelector('input[name="bonus"]:checked');
    btn.disabled = !selectedBonus;
  }

  // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ±Ğ¾Ğ½ÑƒÑĞ°
  function setBonus(bonus) {
    localStorage.setItem("bonus_choice", bonus);
    document.getElementById("price").innerText = bonus === "sachy" ? "1098 KÄ" : "999 KÄ";
    document.getElementById("bonus_choice").value = bonus;
    updateBonusConfirmButton();
  }

  // Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ±Ğ¾Ğ½ÑƒÑĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾ Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ğ·Ğ°ĞºĞ°Ğ·Ğ°
  function closeBonusPopup() {
    document.querySelector(".bonus-popup").style.display = "none";
    showPopup();
    // Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ´Ğ»Ñ Ğ¾ĞºĞ½Ğ° Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· 5 ÑĞµĞº
    if(deliveryPopupTimer) clearTimeout(deliveryPopupTimer);
    deliveryPopupTimer = setTimeout(() => {
      const cityInput = document.getElementById('city');
      const cityVal = cityInput.value.trim().toLowerCase();
      if(cityVal === 'praha') {
        document.querySelector('.delivery-popup').style.display = 'block';
      }
    }, 5000);
  }

  // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ğ·Ğ°ĞºĞ°Ğ·Ğ°
  function showPopup() {
    const popup = document.querySelector(".popup");
    if (!popup.style.display || popup.style.display === "none") {
      popup.style.display = "block";
      startCountdown();
    }
  }

  // Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ 24 Ñ‡Ğ°ÑĞ°
  function startCountdown() {
    const timerDisplay = document.getElementById("timer");
    let deadline = localStorage.getItem("orderDeadline");
    if (!deadline) {
      deadline = Date.now() + 24 * 60 * 60 * 1000;
      localStorage.setItem("orderDeadline", deadline);
    } else {
      deadline = parseInt(deadline, 10);
    }

    function updateTimer() {
      const remaining = deadline - Date.now();
      if (remaining <= 0) {
        timerDisplay.innerText = "â° ÄŒas vyprÅ¡el!";
        return;
      }
      const h = Math.floor(remaining / (1000 * 60 * 60));
      const m = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((remaining % (1000 * 60)) / 1000);
      timerDisplay.innerText = `â³ ZbÃ½vÃ¡ Äas: ${h}h ${m}m ${s}s`;
      setTimeout(updateTimer, 1000);
    }
    updateTimer();
  }

  // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ğ½ÑƒÑĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾ (ĞµÑĞ»Ğ¸ ĞµÑ‰Ğµ Ğ½Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ğ»Ğ¸)
  function triggerBonusManually() {
    if (!localStorage.getItem("bonusShown")) {
      document.querySelector(".bonus-popup").style.display = "block";
      localStorage.setItem("bonusShown", "true");
      // Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ´Ğ»Ñ Ğ¾ĞºĞ½Ğ° Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ±Ğ¾Ğ½ÑƒÑĞ½Ğ¾Ğ³Ğ¾ Ğ¾ĞºĞ½Ğ°
      // ĞĞ¾ Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ¿Ñ€Ğ¸ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ Ğ±Ğ¾Ğ½ÑƒÑĞ½Ğ¾Ğ³Ğ¾ Ğ¾ĞºĞ½Ğ° (ÑĞ¼. closeBonusPopup)
    }
  }

  // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¼ĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€
  function showMessengerPopup() {
    document.getElementById("messengerPopup").style.display = "block";
  }

  // Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¾ĞºĞ½Ğ¾ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸
  function closeDeliveryPopup() {
    document.querySelector('.delivery-popup').style.display = 'none';
  }

  // Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ°
  function resetBonusAndTimer() {
    localStorage.removeItem("bonus_choice");
    localStorage.removeItem("bonusShown");
    localStorage.removeItem("orderDeadline");
    localStorage.removeItem("scrollTriggered");
    document.getElementById("bonus_choice").value = "";
    document.getElementById("price").innerText = "999 KÄ";
    document.querySelectorAll('input[name="bonus"]').forEach(el => (el.checked = false));
    updateBonusConfirmButton();
    alert("Bonus a timer byly resetovÃ¡ny.");
  }

  // Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ğ½ÑƒÑĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€
  function restoreBonusChoice() {
    const savedBonus = localStorage.getItem("bonus_choice");
    if (savedBonus) {
      const bonusRadio = document.querySelector(`input[name="bonus"][value="${savedBonus}"]`);
      if (bonusRadio) {
        bonusRadio.checked = true;
        setBonus(savedBonus);
        updateBonusConfirmButton();
      }
    }
  }

  // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ° â€” Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾, Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ±Ğ¾Ğ½ÑƒÑĞ½Ğ¾Ğµ Ñ‡ĞµÑ€ĞµĞ· 10 ÑĞµĞºÑƒĞ½Ğ´
  window.addEventListener("scroll", () => {
    if (!firstPopupShown) {
      firstPopupShown = true;
      showPopup();

      // ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ±Ğ¾Ğ½ÑƒÑĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾ Ñ‡ĞµÑ€ĞµĞ· 10 ÑĞµĞºÑƒĞ½Ğ´ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ¾ĞºĞ½Ğ°
      if (bonusPopupTimer) clearTimeout(bonusPopupTimer);
      bonusPopupTimer = setTimeout(() => {
        if (!localStorage.getItem("bonusShown")) {
          document.querySelector(".bonus-popup").style.display = "block";
          localStorage.setItem("bonusShown", "true");
        }
      }, 10000);
    }
  });

  // Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ¾Ğ½ÑƒÑĞ° Ğ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€ĞºĞ¸ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ
  window.addEventListener("load", () => {
    restoreBonusChoice();
  });

  // Ğ¡Ğ»ĞµĞ´Ğ¸Ğ¼ Ğ·Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ğ±Ğ¾Ğ½ÑƒÑĞ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ
  document.querySelectorAll('input[name="bonus"]').forEach(el => {
    el.addEventListener("change", (e) => {
      setBonus(e.target.value);
    });
  });

  // ĞŸÑ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ â€” Ñ‚Ñ€ĞµĞºĞ°ĞµĞ¼ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ (Plausible)
  document.getElementById("order-form").addEventListener("submit", () => {
    if (window.plausible) plausible("Objednavka-Odeslana");
  });
</script>
</body>
</html>
