<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prodej dron≈Ø</title>
  <style>
    body {
      margin: 0;
      background-color: #111;
      color: #fff;
      font-family: Arial, sans-serif;
    }
    .banner {
      position: fixed;
      top: 0;
      width: 100%;
      background-color: #e53935;
      color: white;
      padding: 10px;
      font-size: 20px;
      text-align: center;
      z-index: 1000;
    }
    .banner a {
      color: white;
      text-decoration: underline;
    }
    .popup {
      position: fixed;
      top: 10%;
      left: 15%;
      right: 15%;
      background-color: #222;
      padding: 20px;
      border-radius: 10px;
      z-index: 1001;
      display: none;
    }
    .popup-close {
      position: absolute;
      top: 10px;
      right: 20px;
      color: #fff;
      font-size: 20px;
      cursor: pointer;
    }
    .form-group {
      margin-bottom: 10px;
    }
    .hidden {
      display: none;
    }
    #countdown {
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="banner">
  üõçÔ∏è Uspƒõjte koupit za 899 Kƒç! Nab√≠dka konƒç√≠ za <span id="countdown"></span> <a href="#order-form">Objednat</a>
</div>

<div class="popup" id="popup-form">
  <div class="popup-close" onclick="closePopup()">‚úñ</div>
  <form action="https://getform.io/f/bgdlekoa" method="POST" id="order-form">
    <div class="form-group">
      <label>Jm√©no / –ò–º—è:</label>
      <input type="text" name="name" required>
    </div>
    <div class="form-group">
      <label>Telefon:</label>
      <input type="tel" name="phone" required>
    </div>
    <div class="form-group">
      <label>Email:</label>
      <input type="email" name="email" required>
    </div>
    <div class="form-group">
      <label>Doprava / –î–æ—Å—Ç–∞–≤–∫–∞:</label>
      <select id="city-select" name="delivery">
        <option value="praha">Z Prahy / –ò–∑ –ü—Ä–∞–≥–∏</option>
        <option value="nepraha">Ne z Prahy / –ù–µ –∏–∑ –ü—Ä–∞–≥–∏</option>
      </select>
    </div>
    <div class="form-group hidden" id="payment-info">
      <p><strong>Celkov√° cena: 999 Kƒç</strong></p>
      <p>‚ö†Ô∏è P≈ôedplatba: 250 Kƒç na √∫ƒçet ƒåSOB 354037257/0300</p>
      <label><input type="checkbox" id="payment-confirm" name="paid"> ‚úÖ Potvrzuji platbu / –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –æ–ø–ª–∞—Ç—É</label>
    </div>
    <div class="form-group">
      <label>Koment√°≈ô:</label>
      <textarea name="comment"></textarea>
    </div>
    <div class="form-group">
      <label><input type="checkbox" name="confirm_all" checked> V≈°e jak je / –í—Å—ë –∫–∞–∫ –µ—Å—Ç—å</label>
    </div>
    <button type="submit" id="submit-btn">Odeslat objedn√°vku / –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </form>
</div>

<script>
  // –¢–∞–π–º–µ—Ä 24 —á–∞—Å–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
  const countdownEl = document.getElementById("countdown");
  const storedDeadline = localStorage.getItem("droneCountdownDeadline");
  let deadline;
  if (storedDeadline) {
    deadline = new Date(storedDeadline);
  } else {
    deadline = new Date(Date.now() + 24 * 60 * 60 * 1000);
    localStorage.setItem("droneCountdownDeadline", deadline);
  }
  function updateCountdown() {
    const now = new Date();
    const diff = deadline - now;
    if (diff <= 0) {
      countdownEl.textContent = "ƒças vypr≈°el";
      return;
    }
    const hrs = Math.floor(diff / (1000 * 60 * 60));
    const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const secs = Math.floor((diff % (1000 * 60)) / 1000);
    countdownEl.textContent = `${hrs}h ${mins}m ${secs}s`;
  }
  setInterval(updateCountdown, 1000);
  updateCountdown();

  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ø–∞–ø —á–µ—Ä–µ–∑ 7 —Å–µ–∫—É–Ω–¥
  setTimeout(() => {
    document.getElementById("popup-form").style.display = "block";
    const audio = new Audio("https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg");
    audio.play();
  }, 7000);

  function closePopup() {
    document.getElementById("popup-form").style.display = "none";
  }

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞
  const citySelect = document.getElementById("city-select");
  const paymentInfo = document.getElementById("payment-info");
  const submitBtn = document.getElementById("submit-btn");
  const paymentCheckbox = document.getElementById("payment-confirm");

  citySelect.addEventListener("change", () => {
    if (citySelect.value === "nepraha") {
      paymentInfo.classList.remove("hidden");
    } else {
      paymentInfo.classList.add("hidden");
    }
  });

  document.getElementById("order-form").addEventListener("submit", function(e) {
    if (citySelect.value === "nepraha" && !paymentCheckbox.checked) {
      e.preventDefault();
      alert("Potvrƒète pros√≠m platbu 250 Kƒç / –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ–ø–ª–∞—Ç—É 250 –∫—Ä–æ–Ω");
    }
  });
</script>

</body>
</html>
